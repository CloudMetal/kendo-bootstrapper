("function"==typeof define&&define.amd?define:function(i,e){return e()})(["./kendo.draganddrop.min"],function(){(function(i,e){function t(i){return i!==e}function n(i,e,t){return Math.max(Math.min(parseInt(i,10),1/0===t?t:parseInt(t,10)),parseInt(e,10))}function o(i,e){var t=i.children(b);return t.data("kendoWindow")||t.data("kendo"+e)}function r(e){return i(x).filter(function(){var t=i(this),n=o(t,e);return n.options.modal&&t.is(O)&&n.options.visible}).sort(function(e,t){return+i(e).css("zIndex")-+i(t).css("zIndex")})}function s(i,e){return function(){var t=this,n=t.wrapper,o=n[0].style,r=t.options;if(!r.isMaximized&&!r.isMinimized)return t.restoreOptions={width:o.width,height:o.height},n.find(_).hide().end().find(U).parent().hide().eq(0).before(Y.action({name:"Restore"})),e.call(t),"maximize"==i?t.wrapper.find(y).find(Q).parent().hide():t.wrapper.find(y).find(Q).parent().show(),t}}function a(i){var e=this;e.owner=i,e._draggable=new p(i.wrapper,{filter:_,group:i.wrapper.id+"-resizing",dragstart:m(e.dragstart,e),drag:m(e.drag,e),dragend:m(e.dragend,e)})}function d(i){var e=this;e.owner=i,e._draggable=new p(i.wrapper,{filter:y,group:i.wrapper.id+"-moving",dragstart:m(e.dragstart,e),drag:m(e.drag,e),dragend:m(e.dragend,e),dragcancel:m(e.dragcancel,e)})}var l=window.kendo,c=l.ui.Widget,p=l.ui.Draggable,f=i.isPlainObject,h=l._activeElement,m=i.proxy,u=i.extend,g=i.each,w=l.template,v="body",k=".kendoWindow",x=".k-window",z=".k-window-title",y=z+"bar",b=".k-window-content",_=".k-resize-handle",T=".k-overlay",W="k-content-frame",M="k-loading",C="k-state-hover",H="k-state-focused",O=":visible",P="hidden",S="cursor",I="open",D="activate",L="deactivate",R="close",A="refresh",F="resize",q="dragstart",j="dragend",E="error",N="overflow",G="zIndex",U=".k-window-actions .k-i-minimize,.k-window-actions .k-i-maximize",K=".k-i-pin",B=".k-i-unpin",Q=K+","+B,J=".k-window-titlebar .k-window-action",V=l.isLocalUrl,X=c.extend({init:function(n,o){var r,s,p,h,u,w,v=this,_={},T=!1,W=o&&o.actions&&!o.actions.length;c.fn.init.call(v,n,o),o=v.options,n=v.element,h=o.content,W&&(o.actions=[]),v.appendTo=i(o.appendTo||document.body),v._animations(),h&&!f(h)&&(h=o.content={url:h}),n.find("script").filter(function(){return!this.type||this.type.toLowerCase().indexOf("script")>=0}).remove(),n.parent().is(v.appendTo)||o.position.top!==e&&o.position.left!==e||(n.is(O)?(_=n.offset(),T=!0):(s=n.css("visibility"),p=n.css("display"),n.css({visibility:P,display:""}),_=n.offset(),n.css({visibility:s,display:p}))),t(o.visible)&&null!==o.visible||(o.visible=n.is(O)),r=v.wrapper=n.closest(x),n.is(".k-content")&&r[0]||(n.addClass("k-window-content k-content"),v._createWindow(n,o),r=v.wrapper=n.closest(x),v._dimensions()),r.css({top:o.position.top||_.top||"",left:o.position.left||_.left||""}),o.pinned&&v.pin(!0),h&&v.refresh(h),o.visible&&v.toFront(),u=r.children(b),v._tabindex(u),o.visible&&o.modal&&v._overlay(r.is(O)).css({opacity:.5}),r.on("mouseenter"+k,J,function(){i(this).addClass(C)}).on("mouseleave"+k,J,function(){i(this).removeClass(C)}).on("click"+k,J,m(v._windowActionHandler,v)),u.on("keydown"+k,m(v._keydown,v)).on("focus"+k,function(){r.addClass(H)}).on("blur"+k,function(){r.removeClass(H)}),o.resizable&&(r.on("dblclick"+k,y,function(e){return i(e.target).closest(".k-window-action").length||v.toggleMaximization(),this}),g("n e s w se sw ne nw".split(" "),function(i,e){r.append(Y.resizeHandle(e))}),v.resizing=new a(v)),o.draggable&&(v.dragging=new d(v)),w=n.attr("id"),w&&(w+="_wnd_title",r.find(y).children(z).attr("id",w),u.attr({role:"dialog","aria-labelledby":w})),r.add(r.find(".k-resize-handle,.k-window-titlebar")).on("mousedown"+k,m(v.toFront,v)),v.touchScroller=l.touchScroller(n),v._resizeHandler=function(i){return v._onDocumentResize(i)},i(window).on("resize",v._resizeHandler),o.visible&&(v.trigger(I),v.trigger(D)),l.notify(v)},_dimensions:function(){var i=this,e=i.wrapper,t=i.options,o=t.width,r=t.height;i.title(t.title),g(["minWidth","minHeight","maxWidth","maxHeight"],function(i,n){var o=t[n];o&&1/0!=o&&e.css(n,o)}),o&&((""+o).indexOf("%")>0?e.width(o):e.width(n(o,t.minWidth,t.maxWidth))),r&&((""+r).indexOf("%")>0?e.height(r):e.height(n(r,t.minHeight,t.maxHeight))),t.visible||e.hide()},_animations:function(){var i=this.options;i.animation===!1&&(i.animation={open:{effects:{}},close:{hide:!0,effects:{}}})},setOptions:function(i){c.fn.setOptions.call(this,i),this._animations(),this._dimensions()},events:[I,D,L,R,A,F,q,j,E],options:{name:"Window",animation:{open:{effects:{zoom:{direction:"in"},fade:{direction:"in"}},duration:350},close:{effects:{zoom:{direction:"out",properties:{scale:.7}},fade:{direction:"out"}},duration:350,hide:!0}},title:"",actions:["Close"],modal:!1,resizable:!0,draggable:!0,minWidth:90,minHeight:50,maxWidth:1/0,maxHeight:1/0,pinned:!1,position:{},visible:null,height:null,width:null},_closable:function(){return i.inArray("close",i.map(this.options.actions,function(i){return i.toLowerCase()}))>-1},_keydown:function(i){var e,t,o,r,s=this,a=s.options,d=l.keys,c=i.keyCode,p=s.wrapper,f=10,h=s.options.isMaximized;i.target==i.currentTarget&&(c==d.ESC&&s._closable()&&s._close(!0),!a.draggable||i.ctrlKey||h||(e=l.getOffset(p),c==d.UP?t=p.css("top",e.top-f):c==d.DOWN?t=p.css("top",e.top+f):c==d.LEFT?t=p.css("left",e.left-f):c==d.RIGHT&&(t=p.css("left",e.left+f))),a.resizable&&i.ctrlKey&&!h&&(c==d.UP?(t=!0,r=p.height()-f):c==d.DOWN&&(t=!0,r=p.height()+f),c==d.LEFT?(t=!0,o=p.width()-f):c==d.RIGHT&&(t=!0,o=p.width()+f),t&&(p.css({width:n(o,a.minWidth,a.maxWidth),height:n(r,a.minHeight,a.maxHeight)}),s.trigger(F))),t&&i.preventDefault())},_overlay:function(e){var t=this.appendTo.children(".k-overlay"),n=this.wrapper;return t.length||(t=i("<div class='k-overlay' />")),t.insertBefore(n[0]).toggle(e).css(G,parseInt(n.css(G),10)-1),t},_windowActionHandler:function(t){var n=i(t.target).closest(".k-window-action").find(".k-icon"),o=this;o._closing||g({"k-i-close":function(){o._close(!0)},"k-i-maximize":o.maximize,"k-i-minimize":o.minimize,"k-i-restore":o.restore,"k-i-refresh":o.refresh,"k-i-pin":o.pin,"k-i-unpin":o.unpin},function(i,r){return n.hasClass(i)?(t.preventDefault(),r.call(o),!1):e})},center:function(){var e=this.wrapper,t=i(window);return e.css({left:t.scrollLeft()+Math.max(0,(t.width()-e.width())/2),top:t.scrollTop()+Math.max(0,(t.height()-e.height())/2)}),this},title:function(i){var e=this,t=e.wrapper,n=e.options,o=t.find(y),r=o.children(z),s=o.outerHeight();return arguments.length?(i===!1?(t.addClass("k-window-titleless"),o.remove()):(o.length||t.prepend(Y.titlebar(u(Y,n))),t.css("padding-top",s),o.css("margin-top",-s)),r.text(i),e):r.text()},content:function(i){var e=this.wrapper.children(b),t=e.children(".km-scroll-container");return e=t[0]?t:e,i?(e.html(i),this):e.html()},open:function(){var e,t=this,n=t.wrapper,o=t.options,r=o.animation.open,s=n.children(b),a=s.css(N);return t.trigger(I)||(t._closing=!1,t.toFront(),t.element.focus(),o.visible=!0,o.modal&&(e=t._overlay(!1),r.duration?e.kendoStop().kendoAnimate({effects:"fade:in",duration:r.duration}):e.css("opacity",.5).show()),n.is(O)||(s.css(N,P),n.show().kendoStop().kendoAnimate({effects:r.effects,duration:r.duration,complete:function(){t.element.focus(),t.trigger(D),s.css(N,a)}}))),o.isMaximized&&(t._documentScrollTop=i(document).scrollTop(),i("html, body").css(N,P)),t},_close:function(t){var n,s,a,d=this,l=d.wrapper,c=d.options,p=c.animation.open,f=c.animation.close;l.is(O)&&!d.trigger(R,{userTriggered:!!t})&&(d._closing=!0,c.visible=!1,i(x).each(function(e,t){var n=i(t),o=n.find(b);t!=l&&o.find("> ."+W).length>0&&o.children(".k-overlay").remove()}),n=r(c.name),s=c.modal&&!n.length,a=c.modal?d._overlay(!0):i(e),s?f.duration?a.kendoStop().kendoAnimate({effects:"fade:out",duration:f.duration,hide:!0}):a.hide():n.length&&o(n.eq(n.length-1),c.name)._overlay(!0),l.kendoStop().kendoAnimate({effects:f.effects||p.effects,reverse:f.reverse===!0,duration:f.duration,complete:function(){l.hide(),d.trigger(L)}})),d.options.isMaximized&&(i("html, body").css(N,""),d._documentScrollTop&&d._documentScrollTop>0&&i(document).scrollTop(d._documentScrollTop))},close:function(){return this._close(!1),this},toFront:function(e){var t,n,o=this,r=o.wrapper,s=r[0],a=+r.css(G),d=a,l=h(),c=o.element,p=e&&e.target?e.target:null;return i(x).each(function(e,t){var n=i(t),o=n.css(G),r=n.find(b);isNaN(o)||(a=Math.max(+o,a)),t!=s&&r.find("> ."+W).length>0&&r.append(Y.overlay)}),(10001==a||a>d)&&r.css(G,a+2),o.element.find("> .k-overlay").remove(),i(l).is(c)||i(p).is(J+","+J+" .k-icon,:input,a")||c.find(l).length&&c.find(p).length||(c.focus(),t=i(window).scrollTop(),n=parseInt(o.wrapper.position().top,10),n>0&&0>n-t&&(t>0?i(window).scrollTop(n):o.wrapper.css("top",t))),o},toggleMaximization:function(){return this._closing?this:this[this.options.isMaximized?"restore":"maximize"]()},restore:function(){var e=this,t=e.options,n=e.restoreOptions;if(t.isMaximized||t.isMinimized)return e.wrapper.css({position:e.options.pinned?"fixed":"absolute",left:n.left,top:n.top,width:n.width,height:n.height}).find(".k-window-content,.k-resize-handle").show().end().find(".k-window-titlebar .k-i-restore").parent().remove().end().end().find(U).parent().show().end().end().find(Q).parent().show(),i("html, body").css(N,""),this._documentScrollTop&&this._documentScrollTop>0&&i(document).scrollTop(this._documentScrollTop),t.isMaximized=t.isMinimized=!1,e.trigger(F),e},maximize:s("maximize",function(){var e=this,t=e.wrapper,n=t.position();u(e.restoreOptions,{left:n.left,top:n.top}),t.css({left:0,top:0,position:"fixed"}),this._documentScrollTop=i(document).scrollTop(),i("html, body").css(N,P),e.options.isMaximized=!0,e._onDocumentResize()}),minimize:s("minimize",function(){var i=this;i.wrapper.css("height",""),i.element.hide(),i.options.isMinimized=!0}),pin:function(e){var t=this,n=i(window),o=t.wrapper,r=parseInt(o.css("top"),10),s=parseInt(o.css("left"),10);(e||!t.options.pinned&&!t.options.isMaximized)&&(o.css({position:"fixed",top:r-n.scrollTop(),left:s-n.scrollLeft()}),o.find(y).find(K).addClass("k-i-unpin").removeClass("k-i-pin"),t.options.pinned=!0)},unpin:function(){var e=this,t=i(window),n=e.wrapper,o=parseInt(n.css("top"),10),r=parseInt(n.css("left"),10);e.options.pinned&&!e.options.isMaximized&&(n.css({position:"",top:o+t.scrollTop(),left:r+t.scrollLeft()}),n.find(y).find(B).addClass("k-i-pin").removeClass("k-i-unpin"),e.options.pinned=!1)},_onDocumentResize:function(){var e=this,t=e.wrapper,n=i(window);e.options.isMaximized&&(t.css({width:n.width(),height:n.height()-parseInt(t.css("padding-top"),10)}),e.trigger(F))},refresh:function(e){var n,o,r,s=this,a=s.options,d=i(s.element);return f(e)||(e={url:e}),e=u({},a.content,e),o=t(a.iframe)?a.iframe:e.iframe,r=e.url,r?(t(o)||(o=!V(r)),o?(n=d.find("."+W)[0],n?n.src=r||n.src:d.html(Y.contentFrame(u({},a,{content:e}))),d.find("."+W).unbind("load"+k).on("load"+k,function(){s.trigger(A)})):s._ajaxRequest(e)):(e.template&&s.content(w(e.template)({})),s.trigger(A)),s},_ajaxRequest:function(e){var t=this,n=e.template,o=t.wrapper.find(".k-window-titlebar .k-i-refresh"),r=setTimeout(function(){o.addClass(M)},100);i.ajax(u({type:"GET",dataType:"html",cache:!1,error:m(function(i,e){t.trigger(E,{status:e,xhr:i})},t),complete:function(){clearTimeout(r),o.removeClass(M)},success:m(function(i){n&&(i=w(n)(i||{})),t.content(i),t.element.prop("scrollTop",0),t.trigger(A)},t)},e))},destroy:function(){var e,t,n=this;c.fn.destroy.call(n),l.destroy(n.wrapper),n.resizing&&n.resizing.destroy(),n.dragging&&n.dragging.destroy(),n.element.children("iframe").remove(),n.wrapper.remove().add(n.wrapper.find(".k-resize-handle,.k-window-titlebar")).off(k),i(window).off("resize",n._resizeHandler),e=r(),t=n.options.modal&&!e.length,t?n._overlay(!1).remove():e.length>0&&o(e.eq(e.length-1),n.options.name)._overlay(!0)},_createWindow:function(){var e,t,n=this,o=n.element,r=n.options,s=l.support.isRtl(o);r.scrollable===!1&&o.attr("style","overflow:hidden;"),t=i(Y.wrapper(r)),r.title!==!1&&t.append(Y.titlebar(u(Y,r))),e=o.find("iframe:not(.k-content)").map(function(){var i=this.getAttribute("src");return this.src="",i}),t.toggleClass("k-rtl",s).appendTo(n.appendTo).append(o).find("iframe:not(.k-content)").each(function(i){this.src=e[i]}),t.find(".k-window-title").css(s?"left":"right",t.find(".k-window-actions").outerWidth()+10),o.show()}}),Y={wrapper:w("<div class='k-widget k-window' />"),action:w("<a role='button' href='\\#' class='k-window-action k-link'><span role='presentation' class='k-icon k-i-#= name.toLowerCase() #'>#= name #</span></a>"),titlebar:w("<div class='k-window-titlebar k-header'>&nbsp;<span class='k-window-title'>#= title #</span><div class='k-window-actions'># for (var i = 0; i < actions.length; i++) { ##= action({ name: actions[i] }) ## } #</div></div>"),overlay:"<div class='k-overlay' />",contentFrame:w("<iframe frameborder='0' title='#= title #' class='"+W+"' "+"src='#= content.url #'>"+"This page requires frames in order to show content"+"</iframe>"),resizeHandle:w("<div class='k-resize-handle k-resize-#= data #'></div>")};a.prototype={dragstart:function(e){var t=this,n=t.owner,o=n.wrapper;t.elementPadding=parseInt(n.wrapper.css("padding-top"),10),t.initialCursorPosition=l.getOffset(o,"position"),t.resizeDirection=e.currentTarget.prop("className").replace("k-resize-handle k-resize-",""),t.initialSize={width:o.width(),height:o.height()},t.containerOffset=l.getOffset(n.appendTo),o.append(Y.overlay).find(_).not(e.currentTarget).hide(),i(v).css(S,e.currentTarget.css(S))},drag:function(i){var e,t,o,r,s=this,a=s.owner,d=a.wrapper,l=a.options,c=s.resizeDirection,p=s.containerOffset,f=s.initialCursorPosition,h=s.initialSize,m=Math.max(i.x.location,p.left),u=Math.max(i.y.location,p.top);c.indexOf("e")>=0?(e=m-f.left,d.width(n(e,l.minWidth,l.maxWidth))):c.indexOf("w")>=0&&(r=f.left+h.width,e=n(r-m,l.minWidth,l.maxWidth),d.css({left:r-e-p.left,width:e})),c.indexOf("s")>=0?(t=u-f.top-s.elementPadding,d.height(n(t,l.minHeight,l.maxHeight))):c.indexOf("n")>=0&&(o=f.top+h.height,t=n(o-u,l.minHeight,l.maxHeight),d.css({top:o-t-p.top,height:t})),a.trigger(F)},dragend:function(e){var t=this,n=t.owner,o=n.wrapper;return o.find(T).remove().end().find(_).not(e.currentTarget).show(),i(v).css(S,""),n.touchScroller&&n.touchScroller.reset(),27==e.keyCode&&o.css(t.initialCursorPosition).css(t.initialSize),!1},destroy:function(){this._draggable.destroy()}},d.prototype={dragstart:function(e){var t=this.owner,n=t.element,o=n.find(".k-window-actions"),r=l.getOffset(t.appendTo);t.trigger(q),t.initialWindowPosition=l.getOffset(t.wrapper,"position"),t.startPosition={left:e.x.client-t.initialWindowPosition.left,top:e.y.client-t.initialWindowPosition.top},t.minLeftPosition=o.length>0?o.outerWidth()+parseInt(o.css("right"),10)-n.outerWidth():20-n.outerWidth(),t.minLeftPosition-=r.left,t.minTopPosition=-r.top,t.wrapper.append(Y.overlay).find(_).hide(),i(v).css(S,e.currentTarget.css(S))},drag:function(e){var t=this.owner,n={left:Math.max(e.x.client-t.startPosition.left,t.minLeftPosition),top:Math.max(e.y.client-t.startPosition.top,t.minTopPosition)};i(t.wrapper).css(n)},_finishDrag:function(){var e=this.owner;e.wrapper.find(_).toggle(!e.options.isMinimized).end().find(T).remove(),i(v).css(S,"")},dragcancel:function(i){this._finishDrag(),i.currentTarget.closest(x).css(this.owner.initialWindowPosition)},dragend:function(){return this._finishDrag(),this.owner.trigger(j),!1},destroy:function(){this._draggable.destroy()}},l.ui.plugin(X)})(window.kendo.jQuery)});