("function"==typeof define&&define.amd?define:function(e,t){return t()})(["./kendo.mobile.application.min"],function(){!function(e,t){var n,i,o,s=window.kendo,a=s.mobile,r=a.ui,d=e.proxy,h=s.effects.Transition,c=s.ui.Pane,f=s.ui.PaneDimensions,l=r.Widget,u=s.data.DataSource,p=Math,g=p.abs,m=p.ceil,v=p.round,b=p.max,w=p.min,_=p.floor,x="change",S="changing",y="km-current-page",T=l.extend({init:function(t,n){var i,o,a,r,u,p,m=this;l.fn.init.call(m,t,n),t=m.element,s.stripWhitespace(t[0]),t.wrapInner("<div/>").addClass("km-scrollview").append('<ol class="km-pages"/>'),m.inner=t.children().first(),m.pager=t.children().last(),m.page=0,m.inner.css("height",m.options.contentHeight),m.container().bind("show",e.proxy(this,"viewShow")).bind("init",e.proxy(this,"viewInit")),i=new s.ui.Movable(m.inner),o=new h({axis:"x",movable:i,onEnd:d(m._transitionEnd,m)}),a=new s.UserEvents(t,{start:function(e){2*g(e.x.velocity)>=g(e.y.velocity)?a.capture():a.cancel(),o.cancel()},allowSelection:!0,end:d(m._dragEnd,m)}),r=new f({element:m.inner,container:m.element}),u=r.x,u.bind(x,d(m.refresh,m)),p=new c({dimensions:r,userEvents:a,movable:i,elastic:!0}),e.extend(m,{movable:i,transition:o,userEvents:a,dimensions:r,dimension:u,pane:p}),m.page=m.options.page},options:{name:"ScrollView",page:0,duration:300,velocityThreshold:.8,contentHeight:"auto",pageSize:1,bounceVelocityThreshold:1.6},events:[S,x],destroy:function(){l.fn.destroy.call(this),this.userEvents.destroy(),s.destroy(this.element)},viewInit:function(){this.movable.moveAxis("x",-this.page*this.dimension.getSize())},viewShow:function(){this.dimensions.refresh()},refresh:function(){var e,t,n=this,i="",o=n.dimension,s=o.getSize(),a=n.element.find("[data-role=page]");for(a.width(s),o.update(!0),a[0]||(n.page=Math.floor(-n.movable.x/s)),n.scrollTo(n.page,!0),e=n.pages=m(o.getTotal()/s),n.minSnap=-(e-1)*s,n.maxSnap=0,t=0;e>t;t++)i+="<li/>";n.pager.html(i),n._updatePager()},content:function(e){this.element.children().first().html(e),this.dimensions.refresh()},scrollTo:function(e,t){this.page=e,this._moveTo(-e*this.dimension.getSize(),h.easeOutExpo,t)},_moveTo:function(e,t,n){this.transition.moveTo({location:e,duration:n?1:this.options.duration,ease:t})},_dragEnd:function(e){var t,n,i=this,o=e.x.velocity,s=i.dimension.size*i.options.pageSize,a=i.options,r=a.velocityThreshold,d=v,c=h.easeOutExpo;o>r?d=m:-r>o&&(d=_),g(o)>a.bounceVelocityThreshold&&(c=h.easeOutBack),n=-d(i.movable.x/s),t=b(i.minSnap,w(-n*s,i.maxSnap)),n!=i.page&&this.trigger(S,{currentPage:i.page,nextPage:n})&&(t=-i.page*i.dimension.getSize()),this._moveTo(t,c)},_transitionEnd:function(){var e=this,t=Math.round(-e.movable.x/e.dimension.size);t!=e.page&&(e.page=t,e.trigger(x,{page:t}),e._updatePager())},_updatePager:function(){this.pager.children().removeClass(y).eq(this.page).addClass(y)}});r.plugin(T),n=l.extend({init:function(t,n){var i,o,a,r,u,p,m,v=this;l.fn.init.call(v,t,n),t=v.element,n=v.options,t.append("<div/>").addClass("km-virtual-scrollview"),v.template=s.template(n.template||""),v.emptyTemplate=s.template(n.emptyTemplate||""),v.inner=t.children().first(),v.pages=[],v._needsRefresh=!1,m=t.width(),i=new s.ui.Movable(v.inner),o=new h({axis:"x",movable:i,onEnd:d(v._transitionEnd,v)}),a=new f({element:v.inner,container:v.element}),r=a.x,r.bind(x,d(v.refresh,v)),r.forceEnabled(),u=new s.UserEvents(t,{start:function(e){2*g(e.x.velocity)>=g(e.y.velocity)?u.capture():u.cancel(),o.cancel()},allowSelection:!0,end:d(v._dragEnd,v)}),p=new c({dimensions:a,movable:i,userEvents:u,elastic:!0}),e.extend(v,{movable:i,transition:o,userEvents:u,dimensions:a,dimension:r,pane:p,width:m,offset:0,_widgetNeedsRefresh:!1}),v._dataSource(),v._buffer(),v._initPages(),v.view().bind("show",function(){v._widgetNeedsRefresh&&(setTimeout(function(){v._resetPages()},0),v._widgetNeedsRefresh=!1)}),v.options.autoBind&&v.dataSource.fetch()},options:{name:"VirtualScrollView",autoBind:!0,duration:300,velocityThreshold:.8,contentHeight:"auto",bounceVelocityThreshold:1.6,batchSize:1,template:"",emptyTemplate:""},events:["changed"],_dataSource:function(){var e=this,t=e.options;e.dataSource=u.create(t.dataSource)},_buffer:function(){var e=this,t=e.options.batchSize;e.buffer=t>1?new o(e.dataSource,t):new s.data.Buffer(e.dataSource,3*t),e.buffer.bind({resize:d(e._onResize,e),reset:d(e._onReset,e),endreached:d(e._onEndReached,e)})},_unbindDataSource:function(){var e=this;e.buffer.unbind("resize",e._onResize).unbind("reset",e._onReset).unbind("endreached",e._onEndReached)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this._buffer(),this.options.autoBind&&e.fetch()},refresh:function(){var e,t=this,n=t.dimension,i=t.pages,o=n.getSize();for(e=0;e<i.length;e++)i[e].width=o,i[e].element.width(o);i[0].position(-1),i[1].position(0),i[2].position(1),t.width=o,t.dimension.update(!0)},_initPages:function(){var e,t,n=this,o=n.pages,s=n.inner;for(t=0;3>t;t++)e=new i(s),o.push(e);n.dimension.update(!0)},_resetPages:function(){var e,t=this,n=t.pages;for(e=0;e<n.length;e++)n[e].position(e-1),t.setPageContent(n[e],e-1);t.offset=0,t.trigger("changed",{element:n[1].element,page:n[1]})},_moveTo:function(e,t,n){this.transition.moveTo({location:e,duration:n?1:this.options.duration,ease:t})},_resetMovable:function(){this.movable.moveTo({x:0})},forward:function(e){this._moveTo(-this.width,h.easeOutExpo,e)},backward:function(e){this._moveTo(this.width,h.easeOutBack,e)},reset:function(e){this._moveTo(0,e,!1)},scrollTo:function(e){var t,n,i=this,o=i.buffer,s=i.pages;if(o.syncDataSource(),t=o.at(e)){for(n=0;n<s.length;n++)s[n].position(n-1),i.setPageContent(s[n],e+(n-1));i.offset=e,i.trigger("changed",{element:s[1].element,page:s[1]})}},_dragEnd:function(e){var n=this,i=e.x.velocity,o=n.width,s=n.options.velocityThreshold,a=h.easeOutExpo,r=n.offset+2>n.buffer.total;return i>s?0===n.offset?(n.reset(a),t):(n.backward(),t):-s>i&&!r?(n.forward(),t):n.movable.x<0&&g(n.movable.x)>=o/3&&!r?(n.forward(),t):n.movable.x>0&&g(n.movable.x)>=o/3?0===n.offset?(n.reset(a),t):(n.backward(),t):(n.reset(a),t)},_transitionEnd:function(){var e=this,t=e.pages;0!==e.movable.x&&(e.movable.x<0?(t.push(e.pages.shift()),e.offset++,e.setPageContent(t[2],e.offset+1)):(t.unshift(e.pages.pop()),e.offset--,e.setPageContent(t[0],e.offset-1)),t[0].position(-1),t[1].position(0),t[2].position(1),e._resetMovable(),e.trigger("changed",{element:t[1].element,page:t[1]}))},_onResize:function(){var e=this,t=e.pages[2],n=e.offset+1;e._needsRefresh&&(e.setPageContent(t,n),e._needsRefresh=!1)},_onReset:function(){this.element.is(":visible")?this._resetPages():this._widgetNeedsRefresh=!0},_onEndReached:function(){this._needsRefresh=!0},setPageContent:function(e,t){var n,i=this.buffer,o=this.template,s=this.emptyTemplate;t>=0?(n=i.at(t),n?e.content(o(n)):e.content(s({}))):e.content(s({})),a.init(e.element)}}),r.plugin(n),i=s.Class.extend({init:function(t){this.element=e("<div class='virtual-page'></div>"),this.width=t.width(),this.element.width(this.width),t.append(this.element)},content:function(e){this.element.html(e)},position:function(e){this.element.css("transform","translate3d("+this.width*e+"px, 0, 0)")}}),o=s.Observable.extend({init:function(e,t){var n=this;s.Observable.fn.init.call(n),this.dataSource=e,this.batchSize=t,this.total=0,this.buffer=new s.data.Buffer(e,3*t),this.buffer.bind({endreached:function(e){n.trigger("endreached",{index:e.index})},prefetching:function(e){n.trigger("prefetching",{skip:e.skip,take:e.take})},prefetched:function(e){n.trigger("prefetched",{skip:e.skip,take:e.take})},reset:function(){n.total=0,n.trigger("reset")},resize:function(){n.total=this.length/n.batchSize,n.trigger("resize",{total:n.total,offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(e){var n,i,o=this.buffer,s=e*this.batchSize,a=this.batchSize,r=[];for(o.offset>s&&o.at(o.offset-1),i=0;a>i;i++){if(n=o.at(s+i),n===t)return;r.push(n)}return r}})}(window.kendo.jQuery)});