("function"==typeof define&&define.amd?define:function(e,t){return t()})(["./kendo.scheduler.view.min"],function(){!function(e){var t=window.kendo,a=t.ui,n=".kendoAgendaView",s=e.extend;a.AgendaView=a.SchedulerView.extend({init:function(e,s){a.SchedulerView.fn.init.call(this,e,s),this.title=this.options.title,this.name=this.options.name,this._eventTemplate=t.template(this.options.eventTemplate),this._dateTemplate=t.template(this.options.eventDateTemplate),this._timeTemplate=t.template(this.options.eventTimeTemplate),this.element.on("mouseenter"+n,".k-scheduler-agenda .k-scheduler-content tr","_mouseenter").on("mouseleave"+n,".k-scheduler-agenda .k-scheduler-content tr","_mouseleave").on("click"+n,".k-scheduler-agenda .k-scheduler-content .k-link:has(.k-i-close)","_remove"),this._renderLayout(this.options.date)},_mouseenter:function(t){e(t.currentTarget).addClass("k-state-hover")},_mouseleave:function(t){e(t.currentTarget).removeClass("k-state-hover")},_remove:function(a){a.preventDefault(),this.trigger("remove",{uid:e(a.currentTarget).closest(".k-task").attr(t.attr("uid"))})},nextDate:function(){return t.date.nextDay(this.endDate())},startDate:function(){return this._startDate},endDate:function(){return this._endDate},previousDate:function(){return t.date.previousDay(this.startDate())},_renderLayout:function(e){this._startDate=e,this._endDate=t.date.addDays(e,7),this.createLayout(this._layout()),this.table.addClass("k-scheduler-agenda")},_layout:function(){return{columns:[{text:"Date",className:"k-scheduler-datecolumn"},{text:"Time",className:"k-scheduler-timecolumn"},{text:"Event"}]}},_tasks:function(e){var a,n,i,d,r,o,l,c=[];for(a=0;a<e.length;a++)if(n=e[a],i=n.start,d=n.end,n.isAllDay&&(d=t.date.nextDay(d)),r=Math.ceil((d-i)/864e5),o=s({},n),o.startDate=t.date.getDate(i),c.push(o),r>1)for(o.end=t.date.nextDay(i),o.head=!0,l=1;r>l;l++)i=o.end,o=s({},n),o.start=i,o.startDate=t.date.getDate(i),o.end=t.date.nextDay(i),l==r-1?(o.end=new Date(o.start.getFullYear(),o.start.getMonth(),o.start.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds()),o.tail=!0):(o.isAllDay=!0,o.middle=!0),o.end.getTime()<=this.endDate().getTime()&&c.push(o);return new t.data.Query(c).sort([{field:"start",dir:"asc"},{field:"end",dir:"asc"}]).groupBy({field:"startDate"}).toArray()},render:function(e){var a,n,s,i,d,r,o,l,c,u=this.content.find("table").empty();if(e.length>0){for(a=this._tasks(e),n=[],s=0;s<a.length;s++)for(i=a[s].value,d=a[s].items,r=t.date.isToday(i),o=0;o<d.length;o++)l=d[o],c=[],0===o&&c.push(t.format('<td class="k-scheduler-datecolumn{2}" rowspan="{0}">{1}</td>',d.length,this._dateTemplate({date:i}),s==a.length-1?" k-last":"")),l.format=l.head?"{0:t}":l.tail?"{1:t}":"{0:t}-{1:t}",l.resources=this.eventResources(l),c.push(t.format('<td class="k-scheduler-timecolumn"><div>{0}{1}{2}</div></td><td>{3}</td>',l.tail||l.middle?'<span class="k-icon k-i-arrow-w"></span>':"",this._timeTemplate(l),l.head||l.middle?'<span class="k-icon k-i-arrow-e"></span>':"",this._eventTemplate(l))),n.push("<tr"+(r?' class="k-today">':">")+c.join("")+"</tr>");u.append(n.join(""))}this.refreshLayout()},destroy:function(){this.element&&this.element.off(n),a.SchedulerView.fn.destroy.call(this)},options:{title:"Agenda",name:"agenda",selectedDateFormat:"{0:D}-{1:D}",eventTemplate:'<div class="k-task" title="#:title#" data-#=kendo.ns#uid="#=uid#"># if (resources[0]) {#<span class="k-scheduler-mark" style="background-color:#=resources[0].color#"></span># } ## if (data.recurrence || data.recurrenceId) {#<span class="k-icon k-i-refresh"></span># } ##:title#<a href="\\#" class="k-link"><span class="k-icon k-i-close"></span></a></div>',eventTimeTemplate:"#if(data.isAllDay) {#all day#} else { ##=kendo.format(format, start, end)## } #",eventDateTemplate:'<strong class="k-scheduler-agendaday">#=kendo.toString(date, "dd")#</strong><em class="k-scheduler-agendaweek">#=kendo.toString(date,"dddd")#</em><span class="k-scheduler-agendadate">#=kendo.toString(date, "y")#</span>'}})}(window.kendo.jQuery)});