("function"==typeof define&&define.amd?define:function(e,t){return t()})(["./kendo.core.min"],function(){!function(e){function t(e,t){function r(e,s){var i,a;if(s=s[t])for(i=n[e]=n[e]||[],a=0;a<s.length;a++)i.push(s[a]),r(e+1,s[a])}var n=[];return r(0,e),n}function r(e,t){return e.length?'<table class="'+("k-scheduler-table "+(t||"")).trim()+'">'+"<tr>"+e.join("</tr><tr>")+"</tr>"+"</table>":""}function n(t,n,s){var i,a=[];if(s>0)for(i=0;t>i;i++)a.push("<th></th>");return n&&a.push('<th class="k-scheduler-times-all-day">'+n.text+"</th>"),1>s?e():e('<div class="k-scheduler-times">'+r(a)+"</div>")}function s(t,n,s){var i,a,l,o,h,d,c,u,f=[];for(a=0;a<t.length;a++){for(l=t[a],o=[],h=n/l.length,i=0;i<l.length;i++)o.push('<th colspan="'+h+'" class="'+(l[i].className||"")+'">'+l[i].text+"</th>");f.push(o.join(""))}if(d=[],s){for(c=t[t.length-1],u=[],i=0;i<c.length;i++)u.push('<td class="'+(c[i].className||"")+'">&nbsp;</th>');d.push(u.join(""))}return e('<div class="k-scheduler-header k-state-default"><div class="k-scheduler-header-wrap">'+r(f)+r(d,"k-scheduler-header-all-day")+"</div>"+"</div>")}function i(t,n){var s,i,a,l,o=Array(n).join().split(","),h=[];for(i=0;i<t.length;i++)for(a=t[i],l=n/a.length,s=0;s<a.length;s++)o[l*s]+='<th rowspan="'+l+'">'+a[s].text+"</th>";for(s=0;n>s;s++)h.push(o[s]);return 1>n?e():e('<div class="k-scheduler-times">'+r(h)+"</div>")}function a(){return e('<div class="k-scheduler-content"><table class="k-scheduler-table"/></div>')}function l(e,t,r){var n,s,i,a;for(n=e.length-1;n>=0;n--)s=o(e[n]),i=s.start,a=s.end,t>=i&&a>=t&&(t=i,a>r&&(r=a));return h(e,t,r)}function o(t){var r=e(t).attr(c.attr("start-end-idx")).split("-");return{start:+r[0],end:+r[1]}}function h(e,t,r){return e.filter(function(){var e=o(this);return e.start>=t&&e.start<=r||t>=e.start&&t<=e.end})}function d(e,t){var r=[];return e.each(function(){var e,n,s,i,a=this,l=o(a);for(n=0,s=r.length;s>n;n++)if(i=t?l.start>r[n].end:l.start>=r[n].end,l.start<r[n].start||i){e=r[n],e.end<l.end&&(e.end=l.end);break}e||(e={start:l.start,end:l.end,events:[]},r.push(e)),e.events.push(a)}),r}var c=window.kendo,u=c.ui,f=u.Widget,g=".kendoSchedulerView";c.ui.SchedulerView=f.extend({dateForTitle:function(){return c.format(this.options.selectedDateFormat,this.startDate(),this.endDate())},eventResources:function(e){var t,r,n,s,i,a,l,o,h,d=[],u=this.options;if(!u.resources)return d;for(t=0;t<u.resources.length;t++)if(r=u.resources[t],n=r.field,s=c.getter(n)(e))for(r.multiple||(s=[s]),i=r.dataSource.view(),a=0;a<s.length;a++){for(l=null,o=s[a],r.valuePrimitive||(o=c.getter(r.dataValueField)(o)),h=0;h<i.length;h++)if(i[h].get(r.dataValueField)==o){l=i[h];break}null!=l&&d.push({text:c.getter(r.dataTextField)(l),value:o,color:c.getter(r.dataColorField)(l)})}return d},createLayout:function(r){var n,s,i,a,l,o=-1;for(r.rows||(r.rows=[]),n=0;n<r.rows.length;n++)if(r.rows[n].allDay){o=n;break}s=r.rows[o],o>=0&&r.rows.splice(o,1),i=t(r,"columns"),a=t(r,"rows"),this.table=e('<table class="k-scheduler-layout">'),l=a[a.length-1].length,this.table.append(this._topSection(i,s,l)),this.table.append(this._bottomSection(i,a,l)),this.element.append(this.table),this._scroller()},refreshLayout:function(){var e,t,r,n=this,s=n.element.find(">.k-scheduler-toolbar"),i=n.element.innerHeight(),a=0,l=c.support.scrollbar();s.length&&(i-=s.outerHeight()),n.datesHeader&&(a=n.datesHeader.outerHeight()),n.timesHeader&&n.timesHeader.outerHeight()>a&&(a=n.timesHeader.outerHeight()),a&&(i-=a),n.footer&&(i-=n.footer.outerHeight()),e=function(e){var t,r;return e[0].style.height?!0:(t=e.height(),e.height("auto"),r=e.height(),t!=r?(e.height(""),!0):(e.height(""),!1))},t=n.content[0],r=c.support.kineticScrollNeeded?0:l,e(n.element)&&(i>2*l?n.content.height(i):n.content.height(2*l+1),n.times.height(t.clientHeight)),t.offsetWidth-t.clientWidth>0&&(n.table.addClass("k-scrollbar-v"),n.datesHeader.css("padding-right",r-parseInt(n.datesHeader.children().css("border-right-width"),10))),(t.offsetHeight-t.clientHeight>0||t.clientHeight>n.content.children(".k-scheduler-table").height())&&n.table.addClass("k-scrollbar-h")},_topSection:function(t,r,i){this.timesHeader=n(t.length,r,i);var a=t[t.length-1].length;return this.datesHeader=s(t,a,r),e("<tr>").append(this.timesHeader.add(this.datesHeader).wrap("<td>").parent())},_bottomSection:function(t,r,n){return this.times=i(r,n),this.content=a(t[t.length-1],r[r.length-1]),e("<tr>").append(this.times.add(this.content).wrap("<td>").parent())},_scroller:function(){var e,t=this;this.content.bind("scroll"+g,function(){t.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(this.scrollLeft),t.times.scrollTop(this.scrollTop)}),e=c.touchScroller(this.content),e&&e.movable&&(this._touchScroller=e,this.content=e.scrollElement,e.movable.bind("change",function(e){t.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(-e.sender.x),t.times.scrollTop(-e.sender.y)}))},destroy:function(){var e=this;f.fn.destroy.call(this),e.table&&(c.destroy(e.table),e.table.remove())}}),e.extend(u.SchedulerView,{createColumns:d,rangeIndex:o,collidingEvents:l})}(window.kendo.jQuery)});